<div class="optimize-container">
  <div class="optimize-header">
    <h1>Schedule Optimization</h1>
    <p>Analyze and optimize your appointment schedule for maximum efficiency</p>
  </div>

  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-icon">üìä</div>
      <div class="metric-content">
        <div class="metric-value">{{ metrics.utilization }}%</div>
        <div class="metric-label">Schedule Utilization</div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">‚è±Ô∏è</div>
      <div class="metric-content">
        <div class="metric-value">{{ metrics.avgGapTime }}m</div>
        <div class="metric-label">Avg Gap Time</div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">‚ö†Ô∏è</div>
      <div class="metric-content">
        <div class="metric-value">{{ metrics.conflicts }}</div>
        <div class="metric-label">Conflicts</div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">üéØ</div>
      <div class="metric-content">
        <div class="metric-value">{{ metrics.efficiency }}%</div>
        <div class="metric-label">Efficiency Score</div>
      </div>
    </div>
  </div>

  <div class="optimize-card">
    <div class="card-header">
      <h2>AI-Powered Optimization</h2>
      <p>Let our AI analyze your schedule and suggest improvements</p>
    </div>

    @if (!result && !analyzing) {
      <div class="optimize-action">
        <button class="optimize-btn" (click)="runOptimization()">
          <span class="btn-icon">ü§ñ</span>
          <span>Analyze Schedule</span>
        </button>
      </div>
    }

    @if (analyzing) {
      <div class="analyzing">
        <div class="spinner"></div>
        <p>Analyzing your schedule...</p>
      </div>
    }

    @if (result && !analyzing) {
      <div class="results">
        <div class="results-header">
          <div class="success-icon">‚úÖ</div>
          <h3>Optimization Complete!</h3>
          <p class="savings">You can save {{ result.saved }} hours per week</p>
        </div>

        <div class="suggestions">
          <h4>Suggested Improvements:</h4>
          <ul>
            @for (suggestion of result.suggestions; track suggestion) {
              <li>{{ suggestion }}</li>
            }
          </ul>
        </div>

        <div class="results-actions">
          <button class="secondary-btn" (click)="result = null">Dismiss</button>
          <button class="primary-btn" (click)="applyOptimization()">Apply Changes</button>
        </div>
      </div>
    }
  </div>

  <div class="tips-card">
    <h3>Optimization Tips</h3>
    <div class="tips-list">
      <div class="tip-item">
        <span class="tip-icon">üí°</span>
        <div class="tip-content">
          <strong>Batch Similar Appointments</strong>
          <p>Group similar appointment types together to maintain focus and reduce context switching</p>
        </div>
      </div>
      <div class="tip-item">
        <span class="tip-icon">‚è∞</span>
        <div class="tip-content">
          <strong>Minimize Gaps</strong>
          <p>Reduce idle time between appointments to maximize productivity</p>
        </div>
      </div>
      <div class="tip-item">
        <span class="tip-icon">üéØ</span>
        <div class="tip-content">
          <strong>Peak Hours</strong>
          <p>Schedule demanding sessions during your peak energy hours</p>
        </div>
      </div>
    </div>
  </div>
</div>
